<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <!--link rel="icon" href="favicon.ico"!-->

    <title>Get Nimble!</title>

    <!-- Bootstrap core CSS -->
    <link href="assets/css/bootstrap.min.css" rel="stylesheet">
    <link href="assets/css/jquery-ui.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="assets/css/starter-template.css" rel="stylesheet">

    <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
    <!--[if lt IE 9]><script src="../../assets/js/ie8-responsive-file-warning.js"></script><![endif]-->
    <!--script src="assets/js/ie-emulation-modes-warning.js"></script!-->

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>

  <style type="text/css">
    /* show the move cursor as the user moves the mouse over the panel header.*/
    #draggablePanelList .panel-heading {
        cursor: move;
    }
  </style>

  <body>
    <div class="navbar-wrapper">
      <div class="container">

        <nav class="navbar navbar-inverse navbar-static-top">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="index.html"><img class="logo" style="height:75px;" src="assets/img/NIMBLE_LOGO_White.png"></a>
            </div>
            <div id="navbar" class="navbar-collapse collapse" style="float:right">
              <ul class="nav navbar-nav">
                <li class="active"><a href="index.html">Home</a></li>
                <li><a href="myapps.html">My Apps</a></li>
                <li><a href="#store">Store</a></li>
              </ul>
            </div>
          </div>
        </nav>

      </div>
    </div>
    <!--nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container site-wrapper">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">Nimble</a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
            <li class="active"><a href="#">Home</a></li>
            <li><a href="#about">About</a></li>
            <li><a href="#contact">Contact</a></li>
          </ul>
        </div>
      </div>
    </nav-->

    <div class="container">

      <div class="starter-template">
        <h1>My Apps</h1>
      </div>
      <div>
        <ul id="draggablePanelList" class="list-unstyled">
          <li class="panel panel-info" style="border-color: #ffbb4b;">
            <div class="panel-heading" style="color: #b36f00;background-color: #ffe2b3;border-color: #ffbb4b;">
              <span>Nimblet 1</span>
              <button id="doorBtn" class="btn btn-default btn-xs" style="float:right;">Run</button>
            </div>
            <div class="panel-body row">
              <div class="col-md-3">
                <div class="text-center highcharts-title" style="margin-bottom:10px;color:#333333;font-size:18px;fill:#333333;font-family:Lucida Grande, Lucida Sans Unicode, Arial, Helvetica, sans-serif">Live Status</div>
                <img class="featurette-image img-responsive center-block" src="assets/img/DOOR_CLOSED.png">
              </div>
              <div class="col-md-9" id="doorNimblet" style="min-width: 310px; height: 300px; margin: 0 auto"></div>
            </div>
          </li>
          <li class="panel panel-info">
            <div class="panel-heading">
              <span>Nimblet 2</span>
              <button id="toothbrushBtn" class="btn btn-default btn-xs" style="float:right;">Run</button>
            </div>
            <div class="panel-body">
              <div class="col-md-3">
                <div class="text-center highcharts-title" style="margin-bottom:10px;color:#333333;font-size:18px;fill:#333333;font-family:Lucida Grande, Lucida Sans Unicode, Arial, Helvetica, sans-serif">Live Status</div>
                <img class="featurette-image img-responsive center-block" src="assets/img/TOOTH_BRUSH.png">
              </div>
              <div class="col-md-9" id="toothbrushNimblet" style="min-width: 310px; height: 300px; margin: 0 auto"></div>
            </div>
          </li>
          <li class="panel panel-info" style="border-color: #ff2323;">
            <div class="panel-heading" style="color: #b30000;background-color: #ffb3b3;border-color: #ff2323;">
              <span>Nimblet 3</span>
              <button id="medicineBtn" class="btn btn-default btn-xs" style="float:right;">Run</button>
            </div>
            <div class="panel-body">
              <div class="col-md-3">
                <div class="text-center highcharts-title" style="margin-bottom:10px;color:#333333;font-size:18px;fill:#333333;font-family:Lucida Grande, Lucida Sans Unicode, Arial, Helvetica, sans-serif">Live Status</div>
                <img class="featurette-image img-responsive center-block" src="assets/img/MED_OK.png">
              </div>
              <div class="col-md-9" id="medicineNimblet" style="min-width: 310px; height: 300px; margin: 0 auto"></div>
            </div>
          </li>
          <li class="panel panel-info" style="border-color: #654b1a;">
            <div class="panel-heading" style="color: #9c7328;background-color: #d5ab5d;border-color: #654b1a;">
              <span>Nimblet 4</span>
              <button id="poopBtn" class="btn btn-default btn-xs" style="float:right;">Run</button>
            </div>
            <div class="panel-body">
              <div class="col-md-3">
                <div class="text-center highcharts-title" style="margin-bottom:10px;color:#333333;font-size:18px;fill:#333333;font-family:Lucida Grande, Lucida Sans Unicode, Arial, Helvetica, sans-serif">Live Status</div>
                <img class="featurette-image img-responsive center-block" src="assets/img/POOP_ICON.png">
              </div>
              <div class="col-md-9" id="poopNimblet" style="min-width: 310px; height: 300px; margin: 0 auto"></div>
            </div>
          </li>
        </ul>
        <button class="btn btn-default" style="width:100%; height:100px; border-style:dashed">
          <span class="glyphicon glyphicon-plus" style="color:grey" aria-hidden="true"></span>
        </button>

      </div>
      <br>
    </div><!-- /.container -->


    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="assets/js/bootstrap.min.js"></script>
    <script src="assets/js/jquery-1.11.3.min.js"></script>
    <script src="assets/js/jquery-ui.min.js"></script>

    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <!--script src="assets/js/ie10-viewport-bug-workaround.js"></script!-->
  </body>
  <script>
    var panelList = $('#draggablePanelList');

    panelList.sortable({
        // Only make the .panel-heading child elements support dragging.
        // Omit this to make then entire <li>...</li> draggable.
        handle: '.panel-heading', 
        update: function() {
            $('.panel', panelList).each(function(index, elem) {
                 var $listItem = $(elem),
                     newIndex = $listItem.index();

                 // Persist the new indices.
            });
        }
    });


    // Door Status Chart
    var yourLabels = ["Closed", "Open"];

    $(function () {
      $('#doorNimblet').highcharts({
        chart: {
            type: 'spline'
        },
        title: {
            text: 'Door Status'
        },
        subtitle: {
            text: 'Nimble'
        },
        xAxis: {
            type: 'datetime',
            dateTimeLabelFormats: { // don't display the dummy year
                month: '%e. %b',
                year: '%b'
            },
            title: {
                text: 'Date'
            }
        },
        yAxis: {
            title: {
                text: 'Snow depth (m)'
            },
            min: 0,
            labels: {
                
              formatter: function() {
                  return yourLabels[this.value];
                }
            }
        },
        tooltip: {
            headerFormat: '<b>{series.name}</b><br>',
            pointFormat: '{point.x:%e. %b}'
        },

        plotOptions: {
            spline: {
                marker: {
                    enabled: true
                }
            }
        },

        series: [{
            name: 'Door Status',
            // Define the data points. All series have a dummy year
            // of 1970/71 in order to be compared on the same x axis. Note
            // that in JavaScript, months start at 0 for January, 1 for February etc.
            data: [
                [Date.UTC(1970, 9, 21), 0],
                [Date.UTC(1970, 10, 4), 1],
                [Date.UTC(1970, 10, 9), 1],
                [Date.UTC(1970, 10, 27), 0],
                [Date.UTC(1970, 11, 2), 0],
                [Date.UTC(1970, 11, 26), 1],
                [Date.UTC(1970, 11, 29), 1],
                [Date.UTC(1971, 0, 11), 1],
                [Date.UTC(1971, 0, 26), 0],
                [Date.UTC(1971, 1, 3), 0],
                [Date.UTC(1971, 1, 11), 0],
                [Date.UTC(1971, 1, 25), 1],
                [Date.UTC(1971, 2, 11), 1],
                [Date.UTC(1971, 3, 11), 1],
                [Date.UTC(1971, 4, 1), 0],
                [Date.UTC(1971, 4, 5), 0],
                [Date.UTC(1971, 4, 19), 0],
                [Date.UTC(1971, 5, 3), 0]
            ],
            color: '#FFBB4B'
        }]
      });
    });


    // Toothbrush Tracker
    $('#toothbrushNimblet').highcharts({
        chart: {
            type: 'column'
        },
        title: {
            text: 'Brush Time!'
        },
        subtitle: {
            text: 'Nimble'
        },
        xAxis: {
            type: 'category',
            labels: {
                rotation: -45,
                style: {
                    fontSize: '13px',
                    fontFamily: 'Verdana, sans-serif'
                }
            }
        },
        yAxis: {
            min: 0,
            title: {
                text: 'Population (millions)'
            }
        },
        legend: {
            enabled: false
        },
        tooltip: {
            pointFormat: 'Brushtime: <b>{point.y:.1f} seconds</b>'
        },
        series: [{
            name: 'BrushTimes',
            data: [
                ['Monday 6:02am', 73.7],
                ['Monday 10:03pm', 56.1],
                ['Tuesday 7:14am', 84.2],
                ['Tuesday 8:15pm', 74.0],
                ['Wednesday 7:01am', 82.5],
            ],
            dataLabels: {
                enabled: true,
                rotation: -90,
                color: '#FFFFFF',
                align: 'right',
                format: '{point.y:.1f}', // one decimal
                y: 10, // 10 pixels down from the top
                style: {
                    fontSize: '13px',
                    fontFamily: 'Verdana, sans-serif'
                }
            }
        }]
    });

    // Medicine Nimblet
    $(function () {
      $('#medicineNimblet').highcharts({
        chart: {
            type: 'area'
        },
        title: {
            text: 'Medicine Temperature Alerts'
        },
        subtitle: {
            text: 'Nimble'
        },
        xAxis: {
            allowDecimals: false,
            labels: {
                formatter: function () {
                    return this.value; // clean, unformatted number for year
                }
            }
        },
        yAxis: {
            title: {
                text: ''
            }
        },
        tooltip: {
            pointFormat: 'Your medicine alerts: <b>{point.y:,.0f}</b>'
        },
        plotOptions: {
            area: {
                
                marker: {
                    enabled: false,
                    symbol: 'circle',
                    radius: 2,
                    states: {
                        hover: {
                            enabled: true
                        }
                    }
                }
            }
        },
        series: [{
            name: 'Medicine Alerts',
            data: [0,0,1,1,0,0,0,0,0,0,0,1,1,1,0,0,1,1,0,0,0,0,0,0],
            color: '#FF2323'
        }]
      });
    });

    // Poop Nimblet
    $(function () {
        $('#poopNimblet').highcharts({
            chart: {
                type: 'area'
            },
            title: {
                text: 'Baby Poop Detector'
            },
            subtitle: {
                text: 'Nimble'
            },
            xAxis: {
                allowDecimals: false,
                labels: {
                    formatter: function () {
                        return this.value; // clean, unformatted number for year
                    }
                }
            },
            yAxis: {
                title: {
                    text: ''
                }
            },
            tooltip: {
                pointFormat: 'Your baby pooped: <b>{point.y:,.0f}</b>'
            },
            plotOptions: {
                area: {
                    
                    marker: {
                        enabled: false,
                        symbol: 'circle',
                        radius: 2,
                        states: {
                            hover: {
                                enabled: true
                            }
                        }
                    }
                }
            },
            series: [{
                name: 'Poop State',
                data: [0,0,1,1,0,0,0,1,1,0,0,1,1,1,0,0,1,1,0,0,0,0,1,1],
                color: '#9C7328'
            }]
        });
    });



    // Button Event Handlers
    $("#doorBtn").click(function(){
      console.log("Run Door");

      $.get("http://ec2-52-91-163-253.compute-1.amazonaws.com/sensorendpoint/test", function(data, status){
        console.log("Data: " + data + "\nStatus: " + status);
      })
    });

    $("#toothbrushBtn").click(function(){
      console.log("Run ToothBrush");
    });

    $("#medicineBtn").click(function(){
      console.log("Run Medicine");
    });

    $("#poopBtn").click(function(){
      console.log("Run Poop`");
    });

    function disablePanel(panel){

    }
  </script>
</html>
